import os, re
from normalizetext import *

def ReadTXT(folder, name = 'data.txt'):
	pathData = os.path.join(os.getcwd(), folder, 'data.txt')
	text_file = open(pathData, "r", encoding="utf-8")
	text = text_file.read()
	text_file.close()
	return text

def WriteTXT(text, folder):
	pathDataClean = os.path.join(os.getcwd(), folder, 'data-clean.txt')
	text_file = open(pathDataClean, 'w')
	text_file.write(text)
	text_file.close()

def CreateNewData(folder):
	# building-construction-ru
	folder = 'building-construction-ru'#input('Input folder name: ')
	text = ReadTXT(folder)

	delete_symbols = '·\\\n\"-–()[]\{\}=/%!@#$&*-+'
	alphabet = 'абвгдеёжзийклмнопрстуфхцчшщьыъэюя'
	alphabet2 = 'abcdefghijklmnopqrstuvwxyz'
	numbers = '1234567890'

	for c in delete_symbols:
		text = text.replace(c, ' ')
		text = text.lower()
	for c in numbers:
		text = text.replace(c, ' ')
	for c in alphabet:
		text = text.replace(' ' + c + ' ', ' ')
	for c in alphabet2:
		text = text.replace(' ' + c + ' ', ' ')
	text = re.sub(' +', ' ', text)
	text = text.replace('., ', ', ')
	text = text.replace('.; ', '. ')
	text = text.replace(' . ', '. ')
	text = text.replace(' , ', ', ')
	text = re.sub(' +', ' ', text)

	# Lemmatization
	data = TextIntoData(text)
	data = Lemmatization(data)
	text = DataIntoText(data)

	WriteTXT(text, folder)
