import os, re
from normalizetext import *

def ReadTXT(folder, name = 'data.txt', encoding = False):
	pathData = os.path.join(os.getcwd(), folder, name)
	if encoding:
		text_file = open(pathData, "r", encoding='utf-8')
	else:
		text_file = open(pathData, "r")
	text = text_file.read()
	text_file.close()
	return text

def WriteTXT(text, folder, name = 'data-clean.txt'):
	pathDataClean = os.path.join(os.getcwd(), folder, name)
	text_file = open(pathDataClean, 'w')
	text_file.write(text)
	text_file.close()

def CreateNewData(folder, name):
	# building-construction-ru
	folder = 'building-construction-ru'#input('Input folder name: ')
	text = ReadTXT(folder, name, True)

	delete_symbols = '·\\\n\"-–()[]\{\}=/%!@#$&*-+;:'
	alphabet = 'абвгдеёжзийклмнопрстуфхцчшщьыъэюя'
	alphabet2 = 'abcdefghijklmnopqrstuvwxyz'
	numbers = '1234567890'

	text = text.lower()
	for c in delete_symbols:
		text = text.replace(c, ' ')
	for c in numbers:
		text = text.replace(c, ' ')
	for c in alphabet:
		text = text.replace(' ' + c + ' ', ' ')
	for c in alphabet2:
		text = text.replace(' ' + c + ' ', ' ')
	text = re.sub(' +', ' ', text)
	text = text.replace('? ', ' ')
	text = text.replace('! ', ' ')
	text = text.replace('\n', ' ')
	text = text.replace('., ', ', ')
	text = text.replace('.; ', '. ')
	text = text.replace(' . ', '. ')
	text = text.replace(' , ', ', ')
	text = re.sub(' +', ' ', text)

	# Lemmatization
	data = TextIntoData(text)
	data = Lemmatization(data)
	text = DataIntoText(data)

	WriteTXT(text, folder)
